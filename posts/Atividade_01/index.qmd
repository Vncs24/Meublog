---
title: "Cotação do dolar"
author: "Vinícius Fernandes"
date: "2025-11-23"
categories: [python, code, dolar]
image: "Banco-central-do-brasil-logo.png"
jupyter: python3
---

Neste post, exploramos a variação da cotação do dólar em um determinado mês, utilizando dados oficiais do Banco Central do Brasil.
Para isso, foi desenvolvido um código em Python que consulta a API do Banco Central, organiza os dados em um DataFrame e gera um gráfico de linha mostrando a evolução diária da cotação.
O código utiliza a biblioteca `pandas` para manipulação dos dados e `plotly.express` para a criação de gráficos interativos, permitindo visualizar picos, tendências e flutuações da moeda de forma clara.
Ao final, o gráfico é salvo em um arquivo HTML, que pode ser incorporado diretamente em um blog ou visualizado no navegador.
Esta abordagem combina análise de dados, visualização interativa e automação, facilitando a compreensão do comportamento do dólar ao longo do tempo.

```{python}
import requests
import pandas as pd
import plotly.express as px
import calendar
from datetime import datetime

def f(mmyyyy):
    first_date = datetime.strptime(mmyyyy, "%m%Y")
    last_date = first_date.replace(day=calendar.monthrange(first_date.year, first_date.month)[1])

    data_inicial = first_date.strftime("%m-%d-%Y")
    data_final = last_date.strftime("%m-%d-%Y")

    url = (
        "https://olinda.bcb.gov.br/olinda/servico/PTAX/versao/v1/odata/"
        f"CotacaoDolarPeriodo(dataInicial=@dataInicial,dataFinalCotacao=@dataFinalCotacao)"
        f"?@dataInicial='{data_inicial}'&@dataFinalCotacao='{data_final}'"
        "&$format=json"
    )

    r = requests.get(url)
    data = r.json()["value"]

    df = pd.DataFrame(data)
    df["dataHoraCotacao"] = pd.to_datetime(df["dataHoraCotacao"])
    df.sort_values("dataHoraCotacao", inplace=True)

    df["cotacao"] = df["cotacaoCompra"].fillna(df["cotacaoVenda"])

    fig = px.line(df, x="dataHoraCotacao", y="cotacao",
                  title=f"Cotação do Dólar - {mmyyyy}")
    
    fig.write_html("grafico.html")
    fig.show()

    return df

if __name__ == "__main__":
    f("112015")
```
